{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["export function isFunction(val) {\r\n    return typeof val === 'function'\r\n}\r\n\r\nexport function isObject(val) {\r\n    return typeof val  === 'object' && val !== null\r\n}","import {isObject} from \"../utils\";\r\n\r\nclass Observe {\r\n    constructor(data) {\r\n        this.walk(data)\r\n    }\r\n    walk(data){\r\n        Object.keys(data).forEach(key=>{\r\n            defineReactive(data,key,data[key])\r\n        })\r\n    }\r\n}\r\n\r\nfunction defineReactive(data,key,val) {\r\n    observe(val) // 如果val是个对象，也需要劫持一下\r\n    Object.defineProperty(data,key,{\r\n        get(){\r\n            return val\r\n        },\r\n        set(newVal){\r\n            observe(newVal) // 如果给data中的属性赋值了一个新对象，需要对这个对下对象进行劫持\r\n            val = newVal;\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data) {\r\n    // 如果是对象才检测\r\n    if(!isObject(data)) {return}\r\n    return new Observe(data)\r\n}\r\n\r\n","import {isFunction} from \"./utils\";\r\nimport {observe} from \"./observe/index\";\r\n\r\nexport function initState(vm) {\r\n    const opt = vm.$options;\r\n    if(opt.data){\r\n        initData(vm)\r\n    }\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data;\r\n    data = vm._data = isFunction(data) ? data.call(vm):data; // data 有可能是个函数\r\n    observe(data)\r\n}\r\n\r\n","import {initState} from \"./state\";\r\n\r\nexport function initMixin(Vue){\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this\r\n        vm.$options = options\r\n\r\n        // 对数据进行初始化 watch computed data props\r\n        initState(vm)\r\n    }\r\n}\r\n\r\n","import {initMixin} from \"./init\";\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\n\r\n// 扩展原型\r\ninitMixin(Vue)\r\n\r\nexport default Vue"],"names":["isFunction","val","isObject","Observe","data","walk","Object","keys","forEach","key","defineReactive","observe","defineProperty","get","set","newVal","initState","vm","opt","$options","initData","_data","call","initMixin","Vue","prototype","_init","options"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAO,SAASA,UAAT,CAAoBC,GAApB,EAAyB;EAC5B,SAAO,OAAOA,GAAP,KAAe,UAAtB;EACH;EAEM,SAASC,QAAT,CAAkBD,GAAlB,EAAuB;EAC1B,SAAO,QAAOA,GAAP,MAAgB,QAAhB,IAA4BA,GAAG,KAAK,IAA3C;EACH;;MCJKE;EACF,mBAAYC,IAAZ,EAAkB;EAAA;;EACd,SAAKC,IAAL,CAAUD,IAAV;EACH;;;;2BACIA,MAAK;EACNE,MAAAA,MAAM,CAACC,IAAP,CAAYH,IAAZ,EAAkBI,OAAlB,CAA0B,UAAAC,GAAG,EAAE;EAC3BC,QAAAA,cAAc,CAACN,IAAD,EAAMK,GAAN,EAAUL,IAAI,CAACK,GAAD,CAAd,CAAd;EACH,OAFD;EAGH;;;;;;EAGL,SAASC,cAAT,CAAwBN,IAAxB,EAA6BK,GAA7B,EAAiCR,GAAjC,EAAsC;EAClCU,EAAAA,OAAO,CAACV,GAAD,CAAP,CADkC;;EAElCK,EAAAA,MAAM,CAACM,cAAP,CAAsBR,IAAtB,EAA2BK,GAA3B,EAA+B;EAC3BI,IAAAA,GAD2B,iBACtB;EACD,aAAOZ,GAAP;EACH,KAH0B;EAI3Ba,IAAAA,GAJ2B,eAIvBC,MAJuB,EAIhB;EACPJ,MAAAA,OAAO,CAACI,MAAD,CAAP,CADO;;EAEPd,MAAAA,GAAG,GAAGc,MAAN;EACH;EAP0B,GAA/B;EASH;;EAEM,SAASJ,OAAT,CAAiBP,IAAjB,EAAuB;EAC1B;EACA,MAAG,CAACF,QAAQ,CAACE,IAAD,CAAZ,EAAoB;EAAC;EAAO;;EAC5B,SAAO,IAAID,OAAJ,CAAYC,IAAZ,CAAP;EACH;;EC3BM,SAASY,SAAT,CAAmBC,EAAnB,EAAuB;EAC1B,MAAMC,GAAG,GAAGD,EAAE,CAACE,QAAf;;EACA,MAAGD,GAAG,CAACd,IAAP,EAAY;EACRgB,IAAAA,QAAQ,CAACH,EAAD,CAAR;EACH;EACJ;;EAED,SAASG,QAAT,CAAkBH,EAAlB,EAAsB;EAClB,MAAIb,IAAI,GAAGa,EAAE,CAACE,QAAH,CAAYf,IAAvB;EACAA,EAAAA,IAAI,GAAGa,EAAE,CAACI,KAAH,GAAWrB,UAAU,CAACI,IAAD,CAAV,GAAmBA,IAAI,CAACkB,IAAL,CAAUL,EAAV,CAAnB,GAAiCb,IAAnD,CAFkB;;EAGlBO,EAAAA,OAAO,CAACP,IAAD,CAAP;EACH;;ECZM,SAASmB,SAAT,CAAmBC,GAAnB,EAAuB;EAC1BA,EAAAA,GAAG,CAACC,SAAJ,CAAcC,KAAd,GAAsB,UAAUC,OAAV,EAAmB;EACrC,QAAMV,EAAE,GAAG,IAAX;EACAA,IAAAA,EAAE,CAACE,QAAH,GAAcQ,OAAd,CAFqC;;EAKrCX,IAAAA,SAAS,CAACC,EAAD,CAAT;EACH,GAND;EAOH;;ECRD,SAASO,GAAT,CAAaG,OAAb,EAAsB;EAClB,OAAKD,KAAL,CAAWC,OAAX;EACH;;;EAGDJ,SAAS,CAACC,GAAD,CAAT;;;;;;;;"}